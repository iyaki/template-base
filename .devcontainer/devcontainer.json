{
	"name": "Some project",
	"image": "mcr.microsoft.com/devcontainers/universal:5-linux",

	"mounts": [
		{ "source": "${localEnv:HOME}/.opencode", "target": "/home/codespace/.local/share/opencode", "type": "bind" },
		{ "source": "${localEnv:HOME}/intelephense/licence.txt", "target": "/home/codespace/intelephense/licence.txt", "type": "bind" }
	],

	"remoteEnv": {
		// https://opencode.ai/docs/cli/#environment-variables
		"OPENCODE_EXPERIMENTAL_LSP_TOOL": "true",
		"OPENCODE_EXPERIMENTAL_LSP_TY": "true",
		"OPENCODE_ENABLE_EXPERIMENTAL_MODELS": "true",
		"OPENCODE_DISABLE_AUTOCOMPACT": "true",
		"OPENCODE_DISABLE_CLAUDE_CODE": "true",
		"OPENCODE_DISABLE_FILETIME_CHECK": "true",
		"OPENCODE_EXPERIMENTAL_DISABLE_FILEWATCHER": "true",
		"OPENCODE_EXPERIMENTAL_MARKDOWN": "true",
		"OPENCODE_EXPERIMENTAL_PLAN_MODE": "true",
		"OPENCODE_EXPERIMENTAL_ICON_DISCOVERY": "true",
		"OPENCODE_EXPERIMENTAL_BASH_DEFAULT_TIMEOUT_MS": "300000",
		"PLAYWRIGHT_DOCKER_IMAGE": "mcr.microsoft.com/playwright:v1.58.2-noble",
		"PATH": "${containerEnv:PATH}:scripts",
		// For usage with /editr command from OpenCode - https://opencode.ai/docs/tui/#editor-setup
		"EDITOR": "code --wait",
		"VISUAL": "code --wait"
	},

	"features": {
		// "ghcr.io/devcontainers/features/git:1": {
		// 	"version": "latest"
		// },
		// "ghcr.io/joshuanianji/devcontainer-features/github-cli-persistence:1": {},
		"ghcr.io/devcontainers-extra/features/npm-packages:1": {
			"packages": "opencode-ai,@github/copilot,@google/gemini-cli,@covibes/zeroshot,agent-browser"
		},
		"ghcr.io/devcontainers-extra/features/uv:1": {}
	},

	"customizations": {
		"vscode": {
			"extensions": [
				"sst-dev.opencode",
				"editorconfig.editorconfig",
				"nhoizey.gremlins",
				"streetsidesoftware.code-spell-checker-spanish",
				"streetsidesoftware.code-spell-checker"
			]
		}
	},

	"postCreateCommand": {
		"Setup agent browser": "agent-browser install --with-deps",
		"Pull playwright image": "docker pull $PLAYWRIGHT_DOCKER_IMAGE"
	}

	// Use 'forwardPorts' to make a list of ports inside the container available locally.
	// "forwardPorts": [],

	// Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
	// "remoteUser": "root"
}
