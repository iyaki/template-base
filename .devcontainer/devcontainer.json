{
	"name": "Some project",
	"image": "mcr.microsoft.com/devcontainers/universal:4-linux",

	"mounts": [
		{ "source": "${localEnv:HOME}/.opencode", "target": "/home/codespace/.local/share/opencode", "type": "bind" },
		{ "source": "${localEnv:HOME}/intelephense/licence.txt", "target": "/home/codespace/intelephense/licence.txt", "type": "bind" }
	],

	"remoteEnv": {
		// https://opencode.ai/docs/cli/#environment-variables
		"OPENCODE_EXPERIMENTAL_LSP_TOOL": "true",
		"OPENCODE_EXPERIMENTAL_LSP_TY": "true",
		"OPENCODE_ENABLE_EXPERIMENTAL_MODELS": "true",
		"OPENCODE_DISABLE_AUTOCOMPACT": "true",
		"OPENCODE_DISABLE_CLAUDE_CODE": "true",
		"OPENCODE_DISABLE_FILETIME_CHECK": "true",
		"OPENCODE_EXPERIMENTAL_DISABLE_FILEWATCHER": "true",
		"OPENCODE_EXPERIMENTAL_MARKDOWN": "true",
		"OPENCODE_EXPERIMENTAL_PLAN_MODE": "true",
		"PATH": "${containerEnv:PATH}:scripts"
	},

	"features": {
		// "ghcr.io/devcontainers/features/git:1": {
		// 	"version": "latest"
		// },
		// "ghcr.io/devcontainers/features/github-cli:1": {},
		// "ghcr.io/joshuanianji/devcontainer-features/github-cli-persistence:1": {},
		"ghcr.io/devcontainers-extra/features/npm-packages:1": {
			"packages": "opencode-ai,@github/copilot,@google/gemini-cli"
			// "packages": "opencode-ai,@github/copilot,@openai/codex"
		},
		"ghcr.io/devcontainers-extra/features/uv:1": {}
	},

	"customizations": {
		"vscode": {
			"extensions": [
				"sst-dev.opencode",
				"editorconfig.editorconfig",
				"nhoizey.gremlins",
				"streetsidesoftware.code-spell-checker-spanish",
				"streetsidesoftware.code-spell-checker"
			]
		}
	},

	"postCreateCommand": {
		"Setup agent browser": "npm install -g agent-browser && agent-browser install --with-deps"
	}

	// Use 'forwardPorts' to make a list of ports inside the container available locally.
	// "forwardPorts": [],

	// Use 'postCreateCommand' to run commands after the container is created.
	// "postCreateCommand": "uname -a",

	// Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
	// "remoteUser": "root"
}
